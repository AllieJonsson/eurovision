<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              clifford: '#da373d',
            },
          },
        },
      };
    </script>
    <script>
      (function () {
        const id = localStorage.getItem('id') ?? new URL(location.href).searchParams.get('id');
        if (!id) {
          document.getElementById('tokenGone').classList.remove('hidden');
          document.getElementById('spinner').classList.add('hidden');
        } else {
          localStorage.setItem('id', id);
          fetch('/api/bet?id=' + id)
            .then((r) => r.json())
            .then(() => {
              document.getElementById('main').classList.remove('hidden');
            })
            .catch(console.error)
            .finally(() => {
              document.getElementById('spinner').classList.add('hidden');
            });
        }
      })();
    </script>
  </head>
  <body>
    <header class="flex flex-row justify-center mt-8">
      <h1 class="text-3xl font-bold">Uppsalakontorets Eurovisiontippning</h1>
    </header>
    <article class="flex flex-row justify-center mt-8 hidden" id="tokenGone">
      <div class="flex flex-col items-center">
        <h2 class="text-2xl">Din token är borta :(</h2>
        <p>Gå in på länken i din kalenderinbjudan för att förnya den.</p>
      </div>
    </article>
    <article class="flex flex-row justify-center mt-8 hidden" id="main">
      <div class="flex flex-col items-center" id="list">Bravo!</div>
    </article>
    <div
      id="spinner"
      class="mx-auto mt-4 size-8 rounded-full border-4 border-black border-l-transparent animate-spin"
    ></div>
  </body>
</html>
